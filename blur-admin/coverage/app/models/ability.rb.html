<html>
  <head>
    <title>app/models/ability.rb</title>
    
    <link href="../../report.css?0.5766040600836072" media="screen" rel="stylesheet" type="text/css" />
    <script src='../../jquery.js?0.3900585656661423'></script>
    <script>
      $(function() {

        $('#toggle_test_file').click(function(e) {
          e.preventDefault();
          if ($('#main_file').hasClass('side_by_side')) {
            $('#main_file').removeClass('side_by_side');
          } else {
            $('#main_file').addClass('side_by_side');
          }
        
          $('#test_file').toggle();
        });

        $('#test_file').hide();
        
        function cleanString(str) {
          return $.trim(str.replace(/<[^(<|>)]+>/gi, ''));
        }
        
        $('.line_number').hover(function() {
          $(this).attr('title', 'Line: ' + cleanString($(this).html()));
        });
        
        $('.hit_number').hover(function() {
          $(this).attr('title', 'Execution Count: ' + cleanString($(this).html()));
        });
        
        $('.code_line').hover(function() {
          $(this).attr('title', cleanString($(this).html()));
        });
        
      });
    </script>
  </head>
  <body>
    <h1><a href="../../index.html">Coverage Report</a></h1>
    
    <table cellpadding='0' cellspacing='1'>
      <tr class='header'>
        <th>File</th>
        <th>Lines</th>
        <th>Lines Of Code</th>
        <th>Untested Lines of Code</th>
        <th>Tested %</th>
      </tr>
      <tr valign='top'>
        <td>
          app/models/ability.rb
          
            <br />
            <a href='#' id='toggle_test_file'>spec/models/ability_spec.rb</a>
          
        </td>
        <td>81</td>
        <td>42</td>
        <td>0</td>
        <td>100.0%</td>
      </tr>
    </table>

    <div>&nbsp;</div>
    
    <table cellpadding='0' cellspacing='1'>
      <tr>
        <th>Legend</th>
      </tr>
      <tr>
        <td class='hit'>This line was executed.</td>
      </tr>
      <tr>
        <td class='miss'>This line was not executed!</td>
      </tr>
      <tr>
        <td class='never'>This line doesn't matter.</td>
      </tr>
    </table>
    
    <div>&nbsp;</div>

    <div id='content'>
      <div id='main_file'>
        <table id='main'>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>1</td>
              <td class='code_line'>
                <pre>class Ability</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>2</td>
              <td class='code_line'>
                <pre>  include CanCan::Ability</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>3</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>4</td>
              <td class='code_line'>
                <pre>  def initialize(user)</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>5</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>6</td>
              <td class='code_line'>
                <pre>    if user # logged in</pre>
              </td>
              <td class='hit_number'>1027</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>7</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>8</td>
              <td class='code_line'>
                <pre>      # view, edit, and destroy own account</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>9</td>
              <td class='code_line'>
                <pre>      can [:show, :edit, :destroy], :users, :id => user.id</pre>
              </td>
              <td class='hit_number'>835</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>10</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>11</td>
              <td class='code_line'>
                <pre>      # edit own username, email, password</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>12</td>
              <td class='code_line'>
                <pre>      can :update, :users, [:username, :name, :email, :password, :password_confirmation], :id => user.id</pre>
              </td>
              <td class='hit_number'>835</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>13</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>14</td>
              <td class='code_line'>
                <pre>      # logout</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>15</td>
              <td class='code_line'>
                <pre>      can :destroy, :user_sessions</pre>
              </td>
              <td class='hit_number'>835</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>16</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>17</td>
              <td class='code_line'>
                <pre>      if user.has_role? :reader</pre>
              </td>
              <td class='hit_number'>835</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>18</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>19</td>
              <td class='code_line'>
                <pre>        # view pages</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>20</td>
              <td class='code_line'>
                <pre>        can :index, [:zookeepers, :blur_tables, :hdfs]</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>21</td>
              <td class='code_line'>
                <pre>        can :show, [:zookeepers, :help]</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>22</td>
              <td class='code_line'>
                <pre>        can [:show_current, :make_current], :zookeepers</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>23</td>
              <td class='code_line'>
                <pre>        can :dashboard, :zookeepers</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>24</td>
              <td class='code_line'>
                <pre>        can [:expand, :file_info, :info, :folder_info, :slow_folder_info, :file_tree], :hdfs</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>25</td>
              <td class='code_line'>
                <pre>        can :help, :application</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>26</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>27</td>
              <td class='code_line'>
                <pre>        # can view everything but query_string on blur_tables:</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>28</td>
              <td class='code_line'>
                <pre>        attributes = BlurQuery.new.attribute_names.collect{|att| att.to_sym}</pre>
              </td>
              <td class='hit_number'>4920</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>29</td>
              <td class='code_line'>
                <pre>        attributes.delete :query_string</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>30</td>
              <td class='code_line'>
                <pre>        can :index, :blur_queries, attributes</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>31</td>
              <td class='code_line'>
                <pre>        can :long_running, :blur_queries, attributes</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>32</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>33</td>
              <td class='code_line'>
                <pre>        # view more info on queries with everything but query_string</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>34</td>
              <td class='code_line'>
                <pre>        can :more_info, :blur_queries, attributes</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>35</td>
              <td class='code_line'>
                <pre>        can :refresh, :blur_queries</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>36</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>37</td>
              <td class='code_line'>
                <pre>        # view times on blur queries</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>38</td>
              <td class='code_line'>
                <pre>        can :times, :blur_queries</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>39</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>40</td>
              <td class='code_line'>
                <pre>        # Can modify own filter preferences</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>41</td>
              <td class='code_line'>
                <pre>        can :update, :preferences, {:user_id => user.id, :pref_type => 'filter'}</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>42</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>43</td>
              <td class='code_line'>
                <pre>        # View hosts and schema on blur_tables</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>44</td>
              <td class='code_line'>
                <pre>        can :hosts, :blur_tables</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>45</td>
              <td class='code_line'>
                <pre>        can :schema, :blur_tables</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>46</td>
              <td class='code_line'>
                <pre>        can :reload, :blur_tables</pre>
              </td>
              <td class='hit_number'>246</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>47</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>48</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>49</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>50</td>
              <td class='code_line'>
                <pre>      if user.has_role? :editor</pre>
              </td>
              <td class='hit_number'>835</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>51</td>
              <td class='code_line'>
                <pre>        can [:update, :destroy, :update_all, :delete_all, :forget, :forget_all], :blur_tables</pre>
              </td>
              <td class='hit_number'>228</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>52</td>
              <td class='code_line'>
                <pre>        can :update, :blur_queries</pre>
              </td>
              <td class='hit_number'>228</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>53</td>
              <td class='code_line'>
                <pre>        can [:destroy_shard, :destroy_controller, :destroy_cluster, :destroy_zookeeper], :zookeepers</pre>
              </td>
              <td class='hit_number'>228</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>54</td>
              <td class='code_line'>
                <pre>        can [:move_file, :delete_file, :mkdir,:upload_form,:upload], :hdfs</pre>
              </td>
              <td class='hit_number'>228</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>55</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>56</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>57</td>
              <td class='code_line'>
                <pre>      if user.has_role? :auditor</pre>
              </td>
              <td class='hit_number'>835</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>58</td>
              <td class='code_line'>
                <pre>        can :index, :blur_queries, :query_string</pre>
              </td>
              <td class='hit_number'>222</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>59</td>
              <td class='code_line'>
                <pre>        can :more_info, :blur_queries, :query_string</pre>
              </td>
              <td class='hit_number'>222</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>60</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>61</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>62</td>
              <td class='code_line'>
                <pre>      if user.has_role? :admin</pre>
              </td>
              <td class='hit_number'>835</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>63</td>
              <td class='code_line'>
                <pre>        can [:index, :edit, :destroy, :create, :new], :users</pre>
              </td>
              <td class='hit_number'>252</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>64</td>
              <td class='code_line'>
                <pre>        can :update, :users, [:email,User.valid_roles]</pre>
              </td>
              <td class='hit_number'>252</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>65</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>66</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>67</td>
              <td class='code_line'>
                <pre>      if user.has_role? :searcher</pre>
              </td>
              <td class='hit_number'>835</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>68</td>
              <td class='code_line'>
                <pre>        # search</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>69</td>
              <td class='code_line'>
                <pre>        can :access, :search</pre>
              </td>
              <td class='hit_number'>234</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>70</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>71</td>
              <td class='code_line'>
                <pre>        # Can modify own column preferences</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>72</td>
              <td class='code_line'>
                <pre>        can :update, :preferences, {:user_id => user.id, :pref_type => 'column'}</pre>
              </td>
              <td class='hit_number'>234</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>73</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>74</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>75</td>
              <td class='code_line'>
                <pre>    else  # not logged in</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>76</td>
              <td class='code_line'>
                <pre>      can :new, [:users, :user_sessions]</pre>
              </td>
              <td class='hit_number'>192</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>77</td>
              <td class='code_line'>
                <pre>      can :create, :user_sessions</pre>
              </td>
              <td class='hit_number'>192</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>78</td>
              <td class='code_line'>
                <pre>      can :create, :users, [:username, :name, :email, :password, :password_confirmation]</pre>
              </td>
              <td class='hit_number'>192</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>79</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>80</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>81</td>
              <td class='code_line'>
                <pre>end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
        </table>
      </div>
      
        <div id='test_file' class='side_by_side'>
          <table id='test'>
            
            
              <tr class="never">
                <td class='line_number'>1</td>
                <td class='code_line'>
                  <pre>require "spec_helper"</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>2</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>3</td>
                <td class='code_line'>
                  <pre>def controller_actions</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>4</td>
                <td class='code_line'>
                  <pre>  # this method returns a hash of controllers each with an array of their respective</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>5</td>
                <td class='code_line'>
                  <pre>  # actions.  Use this list to make sure unauthorized users are not able to access any</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>6</td>
                <td class='code_line'>
                  <pre>  # actions in a controller.  Note that the action_methods also includes some callbacks,</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>7</td>
                <td class='code_line'>
                  <pre>  # so this list cannot be used for determining that a user *can* do all of the actions</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>8</td>
                <td class='code_line'>
                  <pre>  # in a controller (use cancan 2.0's 'access' for that).</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>9</td>
                <td class='code_line'>
                  <pre>  </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>10</td>
                <td class='code_line'>
                  <pre>  Dir[File.join Rails.root, 'app', 'controllers', '*'].each {|file| load file}</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>11</td>
                <td class='code_line'>
                  <pre>  @controller_actions ||= ApplicationController.subclasses.reduce({}) do |memo, controller|</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>12</td>
                <td class='code_line'>
                  <pre>    memo[controller.to_s.gsub("Controller", "").underscore.to_sym] = </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>13</td>
                <td class='code_line'>
                  <pre>      controller.action_methods.collect {|method| method.to_sym}</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>14</td>
                <td class='code_line'>
                  <pre>    memo</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>15</td>
                <td class='code_line'>
                  <pre>  end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>16</td>
                <td class='code_line'>
                  <pre>end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>17</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>18</td>
                <td class='code_line'>
                  <pre>describe Ability do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>19</td>
                <td class='code_line'>
                  <pre>  describe "when not logged in" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>20</td>
                <td class='code_line'>
                  <pre>    before(:each) do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>21</td>
                <td class='code_line'>
                  <pre>      @ability = Ability.new(nil)</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>22</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>23</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>24</td>
                <td class='code_line'>
                  <pre>    it "can create a user (register) with username, email, password" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>25</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :new,    :users</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>26</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :create, :users, :username</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>27</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :create, :users, :email</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>28</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :create, :users, :password</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>29</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :create, :users, :password_confirmation</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>30</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>31</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>32</td>
                <td class='code_line'>
                  <pre>    it "can not create a user (register) with roles" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>33</td>
                <td class='code_line'>
                  <pre>      User.valid_roles.each do |role|</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>34</td>
                <td class='code_line'>
                  <pre>        @ability.should_not be_able_to :create, :users, role</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>35</td>
                <td class='code_line'>
                  <pre>      end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>36</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>37</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>38</td>
                <td class='code_line'>
                  <pre>    it "can create a session (log in)" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>39</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :create, :user_sessions </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>40</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :new, :user_sessions</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>41</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>42</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>43</td>
                <td class='code_line'>
                  <pre>    it "can not access pages" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>44</td>
                <td class='code_line'>
                  <pre>      # actions are automatically added to this check.  Thus, you have to specifically</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>45</td>
                <td class='code_line'>
                  <pre>      # filter actions that should be available to non logged-in users</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>46</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>47</td>
                <td class='code_line'>
                  <pre>      @actions = controller_actions</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>48</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>49</td>
                <td class='code_line'>
                  <pre>      #filter out actions available to non logged in users</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>50</td>
                <td class='code_line'>
                  <pre>      @actions[:user_sessions] -= [:create, :new]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>51</td>
                <td class='code_line'>
                  <pre>      @actions[:users]         -= [:new, :create]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>52</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>53</td>
                <td class='code_line'>
                  <pre>      @actions.each do |controller, actions|</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>54</td>
                <td class='code_line'>
                  <pre>        actions.each {|action| @ability.should_not be_able_to action, controller}</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>55</td>
                <td class='code_line'>
                  <pre>      end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>56</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>57</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>58</td>
                <td class='code_line'>
                  <pre>  end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>59</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>60</td>
                <td class='code_line'>
                  <pre>  describe "when a user with no roles" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>61</td>
                <td class='code_line'>
                  <pre>    before(:each) do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>62</td>
                <td class='code_line'>
                  <pre>      @user = Factory.stub :user, :roles => []</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>63</td>
                <td class='code_line'>
                  <pre>      @ability = Ability.new @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>64</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>65</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>66</td>
                <td class='code_line'>
                  <pre>    it "can view, edit and delete itself" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>67</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :show, @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>68</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :edit, @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>69</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :destroy, @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>70</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>71</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>72</td>
                <td class='code_line'>
                  <pre>    it "can log out" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>73</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :destroy, :user_sessions</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>74</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>75</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>76</td>
                <td class='code_line'>
                  <pre>    it "can update own username, email, and password" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>77</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @user, :username</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>78</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @user, :email</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>79</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @user, :password</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>80</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @user, :password_confirmation</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>81</td>
                <td class='code_line'>
                  <pre>   end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>82</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>83</td>
                <td class='code_line'>
                  <pre>    it "can not view, edit, update, or delete other users" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>84</td>
                <td class='code_line'>
                  <pre>      other_user = User.new</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>85</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :show, other_user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>86</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :edit, other_user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>87</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :update, other_user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>88</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :destroy, other_user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>89</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>90</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>91</td>
                <td class='code_line'>
                  <pre>    it "can not update own roles" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>92</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :update, @user, :admin</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>93</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :update, @user, :editor </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>94</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>95</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>96</td>
                <td class='code_line'>
                  <pre>    it "can not view query_strings on blur_query page" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>97</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :index, :blur_queries, :query_string</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>98</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>99</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>100</td>
                <td class='code_line'>
                  <pre>    it "can not access pages" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>101</td>
                <td class='code_line'>
                  <pre>      # actions are automatically added to this check.  Thus, you have to specifically</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>102</td>
                <td class='code_line'>
                  <pre>      # filter actions that should be available to non logged-in users.</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>103</td>
                <td class='code_line'>
                  <pre>      # NOTE:  These are just the vanilla actions, so if the action depends on what</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>104</td>
                <td class='code_line'>
                  <pre>      # attribute is being updated, or what value an attribute is (i.e. checking to </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>105</td>
                <td class='code_line'>
                  <pre>      # make sure updated object is the user's) it will pass, so those cases must be</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>106</td>
                <td class='code_line'>
                  <pre>      # tested seperately.</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>107</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>108</td>
                <td class='code_line'>
                  <pre>      @actions = controller_actions</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>109</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>110</td>
                <td class='code_line'>
                  <pre>      #filter out actions available to non logged in users</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>111</td>
                <td class='code_line'>
                  <pre>      @actions[:users] -= [:show, :edit, :destroy, :update]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>112</td>
                <td class='code_line'>
                  <pre>      @actions[:user_sessions] -= [:destroy]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>113</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>114</td>
                <td class='code_line'>
                  <pre>      @actions.each do |controller, actions|</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>115</td>
                <td class='code_line'>
                  <pre>        actions.each {|action| @ability.should_not be_able_to action, controller}</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>116</td>
                <td class='code_line'>
                  <pre>      end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>117</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>118</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>119</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>120</td>
                <td class='code_line'>
                  <pre>  end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>121</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>122</td>
                <td class='code_line'>
                  <pre>  describe "when a reader" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>123</td>
                <td class='code_line'>
                  <pre>    before(:each) do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>124</td>
                <td class='code_line'>
                  <pre>      @user = Factory.stub :user, :roles => [:reader]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>125</td>
                <td class='code_line'>
                  <pre>      @ability = Ability.new @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>126</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>127</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>128</td>
                <td class='code_line'>
                  <pre>    it "can view pages" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>129</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :index, :blur_tables</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>130</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :hosts, :blur_tables</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>131</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :schema, :blur_tables</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>132</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :show_current, :zookeepers</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>133</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :make_current, :zookeepers</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>134</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :index, :zookeepers</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>135</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :index, :blur_queries</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>136</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :more_info, :blur_queries</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>137</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>138</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>139</td>
                <td class='code_line'>
                  <pre>    it "can not view query strings" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>140</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :more_info, :blur_queries, :query_string</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>141</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :index, :blur_queries, :query_string</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>142</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>143</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>144</td>
                <td class='code_line'>
                  <pre>    it "can not change own column preferences" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>145</td>
                <td class='code_line'>
                  <pre>      @preference = Factory.stub :preference, :user_id => @user.id, :pref_type => 'column'</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>146</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :update, @preference</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>147</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>148</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>149</td>
                <td class='code_line'>
                  <pre>    it "can change own filter preferences" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>150</td>
                <td class='code_line'>
                  <pre>      @preference = Factory.stub :preference, :user_id => @user.id, :pref_type => 'filter'</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>151</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @preference</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>152</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>153</td>
                <td class='code_line'>
                  <pre>  end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>154</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>155</td>
                <td class='code_line'>
                  <pre>  describe "when an editor" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>156</td>
                <td class='code_line'>
                  <pre>    before(:each) do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>157</td>
                <td class='code_line'>
                  <pre>      @user = Factory.stub :user, :roles => [:editor]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>158</td>
                <td class='code_line'>
                  <pre>      @ability = Ability.new @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>159</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>160</td>
                <td class='code_line'>
                  <pre>  </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>161</td>
                <td class='code_line'>
                  <pre>    it "can enable, disable, and delete tables" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>162</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, :blur_tables</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>163</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :destroy, :blur_tables</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>164</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>165</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>166</td>
                <td class='code_line'>
                  <pre>    it "can cancel queries" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>167</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, :blur_queries</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>168</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>169</td>
                <td class='code_line'>
                  <pre>  end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>170</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>171</td>
                <td class='code_line'>
                  <pre>  describe "when an auditor" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>172</td>
                <td class='code_line'>
                  <pre>    before(:each) do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>173</td>
                <td class='code_line'>
                  <pre>      @user = Factory.stub :user, :roles => [:auditor]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>174</td>
                <td class='code_line'>
                  <pre>      @ability = Ability.new @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>175</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>176</td>
                <td class='code_line'>
                  <pre>  </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>177</td>
                <td class='code_line'>
                  <pre>    it "can view blur query string" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>178</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :index, :blur_queries, :query_string</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>179</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :more_info, :blur_queries, :query_string</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>180</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>181</td>
                <td class='code_line'>
                  <pre>  end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>182</td>
                <td class='code_line'>
                  <pre>  </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>183</td>
                <td class='code_line'>
                  <pre>  describe "when an admin" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>184</td>
                <td class='code_line'>
                  <pre>    before(:each) do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>185</td>
                <td class='code_line'>
                  <pre>      @user = Factory.stub :user, :roles => [:admin]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>186</td>
                <td class='code_line'>
                  <pre>      @ability = Ability.new @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>187</td>
                <td class='code_line'>
                  <pre>      @other_user = User.new</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>188</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>189</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>190</td>
                <td class='code_line'>
                  <pre>    it "can edit, and delete other users" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>191</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :index, :users</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>192</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :edit, @other_user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>193</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :destroy, @other_user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>194</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>195</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>196</td>
                <td class='code_line'>
                  <pre>    it "can update other users' roles" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>197</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @other_user, :admin</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>198</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @other_user, :editor</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>199</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>200</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>201</td>
                <td class='code_line'>
                  <pre>    it "can not view other individual users" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>202</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :show, @other_user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>203</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>204</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>205</td>
                <td class='code_line'>
                  <pre>    it "can not update other users' username, email, or password" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>206</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :update, @other_user, :username</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>207</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :update, @other_user, :password</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>208</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :update, @other_user, :password_confirmation</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>209</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>210</td>
                <td class='code_line'>
                  <pre>    </pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>211</td>
                <td class='code_line'>
                  <pre>    it "can update other users' email" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>212</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @other_user, :email</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>213</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>214</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>215</td>
                <td class='code_line'>
                  <pre>    it "can create users with roles" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>216</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :create, :users, :admin</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>217</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :create, :users, :editor</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>218</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>219</td>
                <td class='code_line'>
                  <pre>  end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>220</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>221</td>
                <td class='code_line'>
                  <pre>  describe "when a searcher" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>222</td>
                <td class='code_line'>
                  <pre>    before do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>223</td>
                <td class='code_line'>
                  <pre>      @user = Factory.stub :user, :roles => [:searcher]</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>224</td>
                <td class='code_line'>
                  <pre>      @ability = Ability.new @user</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>225</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>226</td>
                <td class='code_line'>
                  <pre></pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>227</td>
                <td class='code_line'>
                  <pre>    it "can view and use the search page" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>228</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :access, :search</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>229</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>230</td>
                <td class='code_line'>
                  <pre>    it "can change own column preferences" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>231</td>
                <td class='code_line'>
                  <pre>      @preference = Factory.stub :preference, :user_id => @user.id, :pref_type => 'column'</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>232</td>
                <td class='code_line'>
                  <pre>      @ability.should be_able_to :update, @preference</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>233</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>234</td>
                <td class='code_line'>
                  <pre>    it "can not change own filter preferences" do</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>235</td>
                <td class='code_line'>
                  <pre>      @preference = Factory.stub :preference, :user_id => @user.id, :pref_type => 'filter'</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>236</td>
                <td class='code_line'>
                  <pre>      @ability.should_not be_able_to :update, @preference</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>237</td>
                <td class='code_line'>
                  <pre>    end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>238</td>
                <td class='code_line'>
                  <pre>  end</pre>
                </td>
              </tr>
              
            
              <tr class="never">
                <td class='line_number'>239</td>
                <td class='code_line'>
                  <pre>end</pre>
                </td>
              </tr>
              
            
          </table>
        </div>
      
    </div>
    
    <p>Generated on: 2012-02-13 17:51:39 -0500</p>
  </body>
</html>