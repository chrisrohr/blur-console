-content_for :title, 'Search'
-content_for :javascript do
  =javascript_include_tag 'jquery.jstree', 'compiled/search'

#search_page_wrapper
  = form_tag search_path, :method => 'post', :id=>'search_form', :remote => true do
    #filter_section
      .tab#saved
        .header#saved
          %label{:id => 'saved'} Saved Searches
        .body#saved
          = render "saved"
      .tab#standard
        .header#standard
          %label{:id => 'standard'} Search
        .body#standard
          #query_input.partial-section
            .query-label= label_tag :query_string, "Query:"
            = text_area_tag :query_string, params[:query_string]
          #table_select.partial-section
            .table-label= label_tag :blur_table, "Table:"
            = select("blur_table", :id, @blur_tables.collect{ |tab| [truncate(tab.table_name, :length => 25, :ommision => "..."), tab.id] })
          #families_select.partial-section
            .column-title
              Column Families:
            #filter_columns
              = render 'filters'

      .tab#advanced
        .header#advanced
          %label{:id => 'advanced'} Advanced Options
        .body#advanced
          #sq_select.partial-section
            = label_tag :super_query, "Super Query:"
            = check_box_tag :super_query, true, true
          #start_offset.partial-section
            = label_tag :offset, 'Start:'
            = number_field_tag :offset, 0, :min => 0
          #fetch_select.partial-section
            = label_tag :result_count, 'Fetch:'
            = select_tag :result_count, options_for_select([25, 50, 100])

      .tab#store
        .header#store
          %label{:id => 'store'} Save Options
        .body#store
          .partial-section
            = label_tag :save_name, 'Name:'
            = text_field_tag 'save_name'
            %button#save_button{:disabled => true, :name => "save", :type => "button"}
              Save

      #search_send.partial_section
        %img{:id => "loading-spinner", :src => "/images/spinner.gif", :alt => "Loading...", :style => "display:none; margin-right:50px;" }
        = submit_tag "Search", :disabled => true, :id => "search_submit"

  #results_wrapper.open_filters
    #bar_section
      #arrow.ui-icon.ui-icon-triangle-1-w
    #results_container
      .help_list#saved_help
        .head
          Use the "Saved Searches" tab to load a previously saved query. 
        .body  
          %ul  
            %li The green play button will execute the query and display the results. 
            %li The pencil will load the save into the form. 
            %li The red "x" will delete the saved query.

      .help_list#search_help  
        .head
          Use the "Search" tab to begin building a query. Use the search button at the bottom to submit.
        .body  
          %ul  
            %li IDK enough about queries to actually make a help list 
      
      .help_list#advanced_help
        .head
          Use the "Advanced Options" tab to further modify a query.
        .body
          %ul  
            %li The "Super Query" option allows you to turn superQuery on/off.
            %li The "Start" option allows you to choose the starting element to display.
            %li The "Fetch" option allows you to limit the amount of rows that are returned.
    
      .help_list#store_help  
        .head
          Use the "Save Options" tab to save the current query.
        .body  
          %ul  
            %li The "Name" field is used to name your saved searches.

#dialog-confirm{:title => "Delete this saved query?", :style => "display:none"} 
  %p This will permanently delete the selected saved query. Do you wish to continue?
