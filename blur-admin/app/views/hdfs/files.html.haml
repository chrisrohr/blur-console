#file_info
  = "#{file_stat.path} has #{pluralize(children.to_i,'file')}"

#file_list{:style => 'display: none' }
  - if !file_names_hash.empty?
    %ul
      - file_names_hash.each do |file,stats|
        %li
          %a{:id => file.gsub(/[^[:alnum:]]/,'-'), :connection => connection}= file.split('/').last
  - else
    = render 'file_info', :file_stat => file_stat

#file_tiles{:style => 'display: none' }
  - if !file_names_hash.empty?
    - file_names_hash.each do |file,stats|
      %button{:id => file.gsub(/[^[:alnum:]]/,'-'), :connection => connection}
        - if file.split('/').last.split('.').length > 1
          - name = file.split('/').last.split('.').last
        - if stats.isdir
          %img{:id => 'icon', :src => "/images/open_folder.png"}
        - elsif name == 'pdf'
          %img{:id => 'icon', :src => "/images/pdf.ico"}
        - elsif name == 'rtf'
          %img{:id => 'icon', :src => "/images/rtf.ico"}
        - elsif name == 'text' or name == 'txt'
          %img{:id => 'icon', :src => "/images/text.ico"}
        - else
          %img{:id => 'icon', :src => "/images/default.ico"}
        = file.split('/').last
  - else
    = render 'file_info', :file_stat => file_stat

#file_details{:style => 'display: none' }
  - if !file_names_hash.empty?
    #file_details_table
      %table
        %thead
          %tr
            %th.name File Name
            %th Length
            %th Directory
            %th Block Reps
            %th Block Size
            %th Owner
            %th Group
        %tbody
          - file_names_hash.each do |file,stats|
            %tr{:id => file.gsub(/[^[:alnum:]]/,'-'), :connection => connection}
              %td.name=file.split('/').last
              %td=stats.length
              %td=stats.isdir
              %td=stats.block_replication
              %td=stats.blocksize
              %td=stats.owner
              %td=stats.group
  - else
    = render 'file_info', :file_stat => file_stat
